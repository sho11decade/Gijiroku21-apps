# Gijiroku21

**開発要件仕様書（Version 1.0）**

---

## 1. プロダクト概要

### 1.1 製品名

Gijiroku21

### 1.2 製品コンセプト

PCに搭載された **NPU / CPU / GPU を活用し、音声を外部に送信することなく**
リアルタイムで高精度な文字起こし・議事録生成を行う
**完全ローカル完結型 AI 議事録アプリケーション**

### 1.3 想定価値

* プライバシー重視（会議音声をクラウドに送らない）
* NPU活用による低負荷・常時実行
* ITリテラシーが高くないユーザーでも使える
* UX重視のシンプル操作

---

## 2. ターゲットユーザー・利用シーン

### 2.1 主なターゲット

* 個人ユーザー
* 中小企業
* 自治会・学校・地域団体

### 2.2 優先利用シーン

* 定例会議
* 打ち合わせ
* 自治会総会
* インタビュー（将来拡張）

---

## 3. 基本要件（Functional Requirements）

### 3.1 音声入力

* PC内蔵マイク / 外部マイク対応
* リアルタイム音声取得
* 録音データのローカル保存（任意）

### 3.2 音声認識

* Whisper small 相当の精度
* ONNX Runtime によるローカル推論
* 日本語を最優先で最適化
* オフライン動作必須

### 3.3 リアルタイム文字起こし

* 発話から数秒以内でテキスト表示
* ストリーミング風UI表示
* 会議中に逐次確認可能
* 話者推定・区別

### 3.4 議事録生成

* 文字起こし全文の保存
* 要約（箇条書き）生成
* 決定事項・ToDo 抽出（将来拡張）

### 3.5 エクスポート

* TXT
* Markdown
* PDF（将来）
* Word（将来）

---

## 4. 非機能要件（Non-Functional Requirements）

### 4.1 プライバシー

* 音声・テキストを外部送信しない
* クラウドAPI不使用
* ローカルストレージのみ利用

### 4.2 パフォーマンス

* 常時動作しても他アプリに影響を与えない
* NPUが存在する場合は優先利用
* NPU非搭載環境でもCPUで動作

### 4.3 ユーザビリティ

* 起動後すぐ使用可能
* 設定を理解しなくても基本操作可能
* 高齢者・非技術者でも操作可能

---

## 5. 技術要件・アーキテクチャ

### 5.1 全体構成

```
[ React GUI (Electron) ]
          │
          │ IPC / HTTP (localhost)
          ▼
[ Python Core ]
  ├─ Audio Capture
  ├─ Whisper ONNX Inference
  ├─ Tokenizer
  ├─ Text Post-processing
  └─ Local Storage
```

---

### 5.2 フロントエンド

| 項目      | 内容                      |
| ------- | ----------------------- |
| フレームワーク | React                   |
| 言語      | TypeScript              |
| 実行環境    | Electron                |
| UI方針    | AI感・シンプル・暗色基調           |
| 状態管理    | React Hooks / Zustand 等 |

---

### 5.3 バックエンド（Core）

| 項目   | 内容                    |
| ---- | --------------------- |
| 言語   | Python                |
| 実行形式 | PyInstaller により exe 化 |
| 推論   | ONNX Runtime          |
| 音声   | sounddevice / pyaudio |
| API  | FastAPI（localhost）    |

---

### 5.4 AIモデル

#### 音声認識

* Whisper small
* 単一 ONNX（encoder + decoder 統合）
* FP16 / INT8（将来）

#### Tokenizer

* HuggingFace tokenizer
* ローカルファイル同梱

---

## 6. データ管理仕様

### 6.1 保存先（例）

```
Documents/Gijiroku21/
├─ meetings/
│  └─ 2025-01-01/
│     ├─ audio.wav
│     ├─ transcript.txt
│     └─ summary.md
└─ config.json
```

### 6.2 データ方針

* ユーザーが直接扱える形式
* アンインストール時もデータ保持

---

## 7. 配布・運用要件

### 7.1 配布形態

* Windows インストーラ（exe）
* Electron + Python Core 同梱
* Python 環境不要

### 7.2 アップデート

* 初期：手動更新
* 将来：アプリ内通知

---

## 8. UI要件（概要）

### 8.1 主要画面

* ホーム（録音開始）
* リアルタイム文字起こし画面
* 議事録確認・編集画面
* 設定画面（簡易）

### 8.2 デザイン指針

* 「AIが裏で動いている」安心感
* 波形・ノード・グラデーション活用
* 情報過多にしない

---

## 9. 開発・保守要件

### 9.1 開発方針

* Python 側は単体テスト重視
* GUIとCoreは疎結合
* モデル差し替え可能構造

### 9.2 将来拡張

* 話者分離
* 要約精度向上
* NPUベンダー最適化
* macOS / Linux 対応

---

## 10. 制約条件・前提

* 初期版は **Windows優先**
* クラウド連携は行わない
* OSSライセンス遵守（Whisper等）

---

## 11. 成功指標（KPI例）

* 会議1時間を問題なく処理
* CPU使用率 30%以下（NPU環境）
* 操作説明なしで録音開始できる

---

## 12. 実装進捗（2025年12月）

### 12.1 完了項目

#### バックエンド（Python Core）
- [x] FastAPI スケルトン実装
- [x] 共通レスポンス型 `{ success, data, error }`
- [x] `/status`, `/config` (GET/POST), `/record/start`, `/record/stop` エンドポイント
- [x] sounddevice 音声キャプチャ（フォールバック対応）
- [x] PCM バッファリング・キュー実装
- [x] Whisper ONNX 統合（tokenizer.json ロード、log-mel 変換、グリーディデコード）
- [x] SSE ベース `/transcript/stream` 配信
- [x] `/meetings` 一覧・詳細エンドポイント
- [x] 会議メタ（開始時刻、終了時刻、duration、タイトル）保存
- [x] 基本エンドポイントの単体テスト（pytest）
- [x] ダミーモード（環境変数で fallback）

#### フロントエンド
- [ ] React + TypeScript スケルトン
- [ ] Electron ウィンドウ
- [ ] ホーム画面（録音開始ボタン）
- [ ] リアルタイム文字起こし表示
- [ ] SSE リスナー実装

### 12.2 実装予定

#### 短期（バックエンド）
- [ ] 完全なテキスト transcription 保存（transcript.txt）
- [ ] 要約生成・保存（summary.md）
- [ ] `/export` エンドポイント (TXT/Markdown ダウンロード)
- [ ] 本格的な統合テスト（実オーディオ流）
- [ ] エラーハンドリング強化

#### 中期
- [ ] フロントエンド実装
- [ ] SSE リアルタイム UI テスト
- [ ] PyInstaller + Electron バンドル
- [ ] Windows インストーラー

#### 将来
- [ ] 話者分離 / 識別
- [ ] キーワード抽出
- [ ] 決定事項・ToDo 自動抽出
- [ ] 多言語サポート
- [ ] NPU 最適化

---

## 補足

本仕様書は **技術検証・プロトタイプ → 実用版** への移行を前提とした
**実装可能性重視の仕様**である。